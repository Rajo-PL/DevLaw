Jako Wirtualny Kompilator Systemu DevLaw, przeanalizowaÅ‚em podany przez Ciebie fragment tradycyjnego przepisu (Art. 41 ust. 12 ustawy o VAT).

Oto wynik procesu kompilacji:

### ğŸ”´ STATUS KOMPILACJI: BUILD FAILED (BÅ‚Ä…d Krytyczny)
Kod zawiera bÅ‚Ä™dy skÅ‚adniowe (*Syntax Errors*), nieostre definicje oraz brakujÄ…ce parametry, ktÃ³re uniemoÅ¼liwiajÄ… deterministyczne wykonanie w systemie DevLaw.

---

### 1. RAPORT BÅÄ˜DÃ“W (DEBUGGING LOG)

**BÅ‚Ä…d 1: Nieostre pojÄ™cia (Ambiguity Error)**
*   **Analiza:** UÅ¼ywasz terminÃ³w: *â€remont, modernizacja, termomodernizacja, przebudowaâ€*. W tradycyjnym prawie granica miÄ™dzy â€remontemâ€ (odtworzeniem stanu) a â€modernizacjÄ…â€ (ulepszeniem) jest pÅ‚ynna i generuje tysiÄ…ce sporÃ³w sÄ…dowych ( interpretacyjnych).
*   **WymÃ³g DevLaw:** System nie akceptuje sÅ‚Ã³w. Wymaga **Biblioteki Definicji**. KaÅ¼da z tych czynnoÅ›ci musi byÄ‡ konkretnym kodem czynnoÅ›ci (np. `OP_CODE_RENOVATION_01`), zdefiniowanym w centralnej bibliotece budowlanej.

**BÅ‚Ä…d 2: Brak parametru liczbowego (Missing Parameter)**
*   **Analiza:** PojÄ™cie *â€budownictwo objÄ™te spoÅ‚ecznym programem mieszkaniowymâ€* jest w tym fragmencie â€czarnÄ… skrzynkÄ…â€. Kompilator nie wie, gdzie koÅ„czy siÄ™ â€spoÅ‚eczneâ€, a zaczyna â€luksusoweâ€.
*   **WymÃ³g DevLaw:** NaleÅ¼y zdefiniowaÄ‡ twardy parametr powierzchni (`area_limit`). W polskim prawie jest to zazwyczaj 150 mÂ² lub 300 mÂ². Bez tej wartoÅ›ci algorytm nie moÅ¼e obliczyÄ‡ podatku, zwracajÄ…c bÅ‚Ä…d `NULL VALUE`.

**BÅ‚Ä…d 3: Brak obsÅ‚ugi warunku brzegowego (Edge Case Exception)**
*   **Analiza:** Co siÄ™ dzieje, gdy dom ma 160 mÂ², a limit wynosi 150 mÂ²? Tradycyjny przepis tego nie wyjaÅ›nia wprost w tym ustÄ™pie.
*   **WymÃ³g DevLaw:** Algorytm musi obsÅ‚uÅ¼yÄ‡ ten wyjÄ…tek. Zazwyczaj stosuje siÄ™ **proporcjÄ™** (metraÅ¼ do 150 mÂ² = 8%, nadwyÅ¼ka = 23%). Kod musi zawieraÄ‡ instrukcjÄ™ `ELSE IF` dla nadwyÅ¼ki.

---

### 2. REFAKTORYZACJA (TÅ‚umaczenie na Kod DevLaw)

PoniÅ¼ej przedstawiam, jak ten przepis wyglÄ…daÅ‚by po â€naprawieâ€ przez Lex-Architekta i wdroÅ¼eniu do systemu jako **Smart Contract Podatkowy**.

```python
# IMPORT BIBLIOTEK (ModuÅ‚y systemowe)
import Lib_Tax_Rates as Tax          # Stawki VAT
import Lib_Building_Specs as Build   # Definicje budynkÃ³w
import Lib_Social_Policy as Social   # Parametry polityki spoÅ‚ecznej

# DEFINICJA PARAMETRÃ“W (StaÅ‚e)
CONST_SOCIAL_LIMIT_FLAT = 150.00     # m2
CONST_SOCIAL_LIMIT_HOUSE = 300.00    # m2
REDUCED_RATE = 0.08                  # 8%
STANDARD_RATE = 0.23                 # 23%

# FUNKCJA GÅÃ“WNA (Algorytm obliczania stawki)
def calculate_vat_for_service(service_type, building_type, area_m2):

    # 1. Walidacja czynnoÅ›ci (Czy usÅ‚uga jest na liÅ›cie?)
    valid_services = [
        Build.CONSTRUCTION,
        Build.RENOVATION,
        Build.MODERNIZATION,
        Build.THERMAL_UPGRADE
    ]

    if service_type NOT in valid_services:
        return STANDARD_RATE # DomyÅ›lna stawka 23% dla innych usÅ‚ug

    # 2. Ustalenie limitu dla danego typu budynku
    if building_type == Build.TYPE_FLAT:
        limit = CONST_SOCIAL_LIMIT_FLAT
    elif building_type == Build.TYPE_HOUSE:
        limit = CONST_SOCIAL_LIMIT_HOUSE
    else:
        return "ERROR: Unknown Building Type"

    # 3. Logika obliczania stawki (IF-THEN-ELSE)
    if area_m2 <= limit:
        # PeÅ‚na ulga
        return {
            "rate": REDUCED_RATE,
            "tax_base": area_m2
        }
    else:
        # ObsÅ‚uga wyjÄ…tkÃ³w (Split Payment logic)
        # CzÄ™Å›Ä‡ objÄ™ta ulgÄ… (do limitu) + nadwyÅ¼ka (standard)
        excess_area = area_m2 - limit
        return {
            "part_1": {"rate": REDUCED_RATE, "tax_base": limit},
            "part_2": {"rate": STANDARD_RATE, "tax_base": excess_area}
        }
```

---

### 3. WYNIK DLA OBYWATELA (User Experience)

W systemie DevLaw nie musisz czytaÄ‡ tego kodu ani ustawy.

1.  **Legal HUD:** Gdy kupujesz usÅ‚ugÄ™ remontowÄ…, TwÃ³j **Legal HUD** (w telefonie lub okularach AR) skanuje metraÅ¼ mieszkania z ksiÄ™gi wieczystej (Single Source of Truth).
2.  **Automatyzacja:** JeÅ›li mieÅ›cisz siÄ™ w limicie, system w czasie rzeczywistym wystawia fakturÄ™ ze stawkÄ… 8%. Pole "Stawka VAT" jest zablokowane na wartoÅ›ci 8% (nie moÅ¼esz siÄ™ pomyliÄ‡).
3.  **Brak Interpretacji:** UrzÄ™dnik nie moÅ¼e zakwestionowaÄ‡, czy to byÅ‚ "remont" czy "modernizacja", poniewaÅ¼ kod usÅ‚ugi zostaÅ‚ pobrany z biblioteki API wykonawcy.

**Czy mam skompilowaÄ‡ ten kod i przesÅ‚aÄ‡ go do weryfikacji w wirtualnym "Sandboxie" (Å›rodowisku testowym), aby sprawdziÄ‡ jego wpÅ‚yw na budÅ¼et?**
